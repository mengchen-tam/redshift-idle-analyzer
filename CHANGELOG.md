# 更新日志

本文档记录了Redshift空闲时间计算器的所有重要变更。

## [1.0.0] - 2025-01-29

### 🎉 初始版本发布

#### 核心功能
- **📊 CloudWatch指标分析**: 基于ReadIOPS、WriteIOPS、DatabaseConnections三个关键指标判断集群活跃状态
- **⏱️ 精确空闲时间计算**: 60秒采样间隔，与Serverless计费周期完全对齐
- **� 成本检节省分析**: 基于中国北京区域定价，准确计算RPU需求和成本对比
- **🔍 数据质量验证**: 自动检查数据完整性，提供可靠的分析基础
- **🧪 完整测试套件**: 包含模拟数据测试和边界情况测试

#### 技术特性
- **🚀 单文件部署**: 所有功能集成在一个Python脚本中，易于部署
- **📦 最小依赖**: 仅需要boto3和基础Python库
- **🔄 智能分批查询**: 自动处理CloudWatch API的1440数据点限制
- **⚡ 容错设计**: 支持API限流处理、重试机制和数据缺失处理
- **🌍 全区域支持**: 支持所有AWS区域，包括中国区

#### 采样策略优化
- **⏰ 固定60秒采样**: 与Redshift Serverless计费周期一致
- **📈 分批数据获取**: 每批查询1天数据，保持高精度采样
- **🎯 精确RPU计算**: 基于"8 RPU = 4 x RA3.XLPlus"的准确对应关系

#### 支持的实例类型
- **推荐使用**: ra3.large, ra3.xlplus, ra3.4xlarge, ra3.16xlarge
- **传统支持**: dc2.large, dc2.8xlarge（即将淘汰）

#### 货币和定价
- **💴 中国区域**: 默认使用人民币定价，基于最新AWS中国区价格
- **💵 其他区域**: 自动切换到美元定价
- **🔢 RPU计算**: Serverless RPU需求基于集群配置自动计算

### 已知限制
- 成本估算基于简化模型，实际成本可能有差异
- 分析天数限制在30天内（CloudWatch数据保留限制）
- 需要适当的AWS权限（cloudwatch:GetMetricStatistics, redshift:DescribeClusters）

---

**格式说明**：
- 🎉 新功能
- 🔧 改进
- 🐛 Bug修复
- ⚠️ 重要变更
- � 文档更新功